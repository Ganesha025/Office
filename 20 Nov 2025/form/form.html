<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Registration</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
* { font-family: 'Inter', sans-serif; }
.input-wrapper { position: relative; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
input, select { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
input::placeholder, select::placeholder { color: transparent; }
label { position: absolute; left: 1rem; top: 1rem; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); pointer-events: none; background: white; padding: 0 .5rem; transform-origin: left; color: #6B7280; font-weight: 400; }
input:focus+label, input:not(:placeholder-shown)+label, select:focus+label, select:not([value=""])+label { top: -.5rem; font-size: .75rem; color: #1e1d64; transform: scale(0.9); font-weight: 500; }
.input-valid { border-color: #10B981 !important; box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1); }
.input-invalid { border-color: #EF4444 !important; box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1); }
.guide-valid { color: #10B981 !important; }
.guide-invalid { color: #EF4444 !important; }
.form-container { background: linear-gradient(135deg, #FFFFFF 0%, #F9FAFB 100%); backdrop-filter: blur(10px); }
.glass-effect { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
.floating-label { background: linear-gradient(135deg, #F9FAFB 0%, #FFFFFF 100%); }
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}input[type=number] {
  -moz-appearance: textfield;
}.verify-button:disabled {
    background: #9CA3AF;
    cursor: not-allowed;
}
</style>
</head>
<body class="bg-gradient-to-br from-white to-gray-100 min-h-screen flex items-center justify-center p-4">
<div class="w-full max-w-2xl">
<div class="text-center mb-10">
<h1 class="text-4xl font-bold bg-gradient-to-r from-[#1e1d64] to-[#1e1d64] bg-clip-text text-transparent mb-3">Student Registration</h1>
<p class="text-gray-600 text-lg font-medium">Create your academic profile with us</p>
</div>

<div class="form-container glass-effect rounded-2xl shadow-2xl p-8 transition-all duration-500 hover:shadow-3xl">
<form id="registrationForm" class="space-y-8">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="input-wrapper">
<input type="text" id="initial" placeholder=" " maxlength="3" class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<label for="initial" class="floating-label text-gray-500 text-sm">Initial *</label>
<p id="initialGuide" class="text-xs font-medium mt-2"></p>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>

<div class="input-wrapper">
<input type="text" id="name" placeholder=" " class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<label for="name" class="floating-label text-gray-500 text-sm">Full Name *</label>
<p id="nameGuide" class="text-xs font-medium mt-2"></p>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>
</div>

<div class="input-wrapper">
<input type="date" id="dob" placeholder=" " class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<label for="dob" class="floating-label text-gray-500 text-sm">Date of Birth *</label>
<p id="dobGuide" class="text-xs text-gray-600 font-medium mt-2">Select your birth date (Past years only)</p>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="input-wrapper">
<input type="text" id="email" placeholder=" " class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<label for="email" class="floating-label text-gray-500 text-sm">Email Address *</label>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>

<div class="input-wrapper">
<input type="text" id="phone" placeholder=" " value="+91" class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<label for="phone" class="floating-label text-gray-500 text-sm">Phone Number *</label>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    
    <div class="input-wrapper">
        <select id="course"
            class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none 
                   focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm 
                   transition-all duration-300 appearance-none cursor-pointer">
            <option value="" hidden selected>Select Course *</option>
        </select>
        <label for="course" class="floating-label text-gray-500 text-sm">Select Course *</label>
        <p class="text-xs text-red-500 font-medium mt-1 error"></p>
    </div>

    <div class="input-wrapper" id="deptWrapper" style="display:none;">
    <select id="department"
        class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none 
               focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm 
               transition-all duration-300 appearance-none cursor-pointer">
        <option value="" hidden selected>Select Department *</option>
    </select>
    <label for="department" class="floating-label text-gray-500 text-sm">Select Department *</label>
    <p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>


</div>

<script>



</script>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="input-wrapper">
<input type="text" id="marks12" placeholder=" " maxlength="3" class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<label for="marks12" class="floating-label text-gray-500 text-sm">12th Marks (%) *</label>
<p id="marks12Guide" class="text-xs font-medium mt-2"></p>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>

<div class="input-wrapper">
<input type="text" id="marks10" placeholder=" " maxlength="3" class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<label for="marks10" class="floating-label text-gray-500 text-sm">10th Marks (%) *</label>
<p id="marks10Guide" class="text-xs font-medium mt-2"></p>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="input-wrapper relative">
<input type="password" id="password" placeholder=" " class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300 pr-12">
<label for="password" class="floating-label text-gray-500 text-sm">Password *</label>
<span id="togglePass" class="material-icons absolute right-4 top-4 cursor-pointer text-gray-500 text-xl hover:text-[#1e1d64] transition-colors duration-200">visibility</span>
<p id="passwordGuide" class="text-xs font-medium mt-2"></p>
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>

<div class="input-wrapper relative">
<input type="password" id="confirmPassword" placeholder=" " class="w-full px-5 py-4 border-2 border-gray-100 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300 pr-12">
<label for="confirmPassword" class="floating-label text-gray-500 text-sm">Confirm Password *</label>
<span id="toggleConfirmPass" class="material-icons absolute right-4 top-4 cursor-pointer text-gray-500 text-xl hover:text-[#1e1d64] transition-colors duration-200">visibility</span>
<!-- <p id="confirmGuide" class="text-xs text-gray-600 font-medium mt-2">Re-enter your password</p> -->
<p class="text-xs text-red-500 font-medium mt-1 error"></p>
</div>
</div>

<div id="otpSection" class="hidden space-y-4 p-6 bg-gradient-to-r from-[#1e1d64]/10 to-[#1e1d64]/5 rounded-xl border border-[#1e1d64]/20 transition-all duration-500">
<p class="text-[#1e1d64] font-semibold text-sm flex items-center">
<span class="material-icons text-base mr-2">verified</span>
Enter OTP sent to your mobile number
</p>
<input type="number" id="otpInput" maxlength="6" placeholder="Enter 6-digit OTP" class="w-full px-5 py-4 border-2 border-[#1e1d64]/20 rounded-xl outline-none focus:border-[#1e1d64] bg-white text-gray-800 font-medium shadow-sm transition-all duration-300">
<p class="text-xs text-red-500 font-medium mt-1" id="otpError"></p>
<button id="verifyOtp" disabled type="button" class=" verify-button w-full py-4 bg-gradient-to-r from-[#1e1d64] to-[#1e1d64]/90 text-white rounded-xl hover:from-[#1e1d64]/90 hover:to-[#1e1d64]/80 transition-all duration-300 font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
Verify OTP
</button>
</div>

<button type="submit" id="submitBtn" class="w-full py-5 bg-gradient-to-r from-[#1e1d64] to-[#1e1d64]/90 text-white rounded-xl hover:from-[#1e1d64]/90 hover:to-[#1e1d64]/80 transition-all duration-300 font-semibold text-lg shadow-2xl hover:shadow-3xl transform hover:-translate-y-1 flex items-center justify-center gap-2">
<span>Register Now</span>
<span class="material-icons text-xl">arrow_forward</span>
</button>
</form>

<p id="successMessage" class="text-green-600 text-center mt-6 font-semibold text-lg transition-all duration-500 flex items-center justify-center gap-2">
<!-- <span class="material-icons display-none">check_circle</span> -->
</p>
</div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="script.js"></script>
<script>
$(()=>{

$('#initial').focus();
const courseData = {
    "BSc": [
        "Computer Science", "Information Technology", "Mathematics",
        "Physics", "Chemistry", "Biotechnology", "Electronics",
        "Statistics", "Geology", "Environmental Science", "Botany",
        "Zoology", "Microbiology", "Astronomy", "Genetics",
        "Forensic Science", "Biochemistry", "Data Science", "Nanotechnology",
        "Neuroscience", "Oceanography", "Agricultural Science", "Material Science"
    ],
    "BA": [
        "English Literature", "Political Science", "Economics",
        "Psychology", "History", "Sociology", "Philosophy",
        "Anthropology", "Linguistics", "Journalism", "Fine Arts",
        "Performing Arts", "Religious Studies", "Geography",
        "Archaeology", "Mass Communication", "Education", "Library Science"
    ],
    "BCom": [
        "General", "Accounting & Finance", "Corporate Secretaryship",
        "Banking Management", "Insurance", "Taxation", "E-Commerce",
        "Business Analytics", "Finance & Investment", "Marketing",
        "Human Resource Management", "International Business",
        "Retail Management", "Supply Chain Management", "Financial Planning",
        "Entrepreneurship", "Commerce & Law"
    ],
    "Engineering": [
        "Computer Science", "Mechanical", "Civil",
        "Electrical", "Electronics & Communication", "Chemical",
        "Aerospace", "Automobile", "Industrial", "Biomedical",
        "Environmental", "Mechatronics", "Mining", "Petroleum",
        "Robotics", "Nanotechnology Engineering", "Marine Engineering",
        "Production Engineering", "Textile Engineering"
    ],
    "Medical & Health Sciences": [
        "MBBS", "BDS", "Nursing", "Pharmacy", "Physiotherapy",
        "Occupational Therapy", "Medical Lab Technology", "Nutrition",
        "Public Health", "Ayurveda", "Homeopathy", "Yoga Therapy",
        "Optometry", "Radiology", "Speech Therapy", "Health Informatics",
        "Dietetics", "Genetic Counseling", "Emergency Medical Services"
    ],
    "Design & Arts": [
        "Fashion Design", "Interior Design", "Graphic Design",
        "Animation", "Film & Media", "Product Design", "Photography",
        "Performing Arts", "Fine Arts", "Textile Design", "Ceramic Design",
        "Jewelry Design", "Game Design", "UI/UX Design", "Sound Design"
    ],
    "Law & Social Sciences": [
        "LLB", "Criminology", "Social Work", "Public Administration",
        "Human Rights", "International Relations", "Political Theory",
        "Labour Law", "Cyber Law", "Corporate Law", "Sociology",
        "Development Studies"
    ],
    "Vocational & Applied Sciences": [
        "Hotel Management", "Travel & Tourism", "Event Management",
        "Culinary Arts", "Sports Science", "Agriculture", "Forestry",
        "Fisheries", "Animal Husbandry", "Horticulture", "Landscape Design",
        "Renewable Energy", "Automotive Technology", "Aeronautical Technology",
        "Maritime Studies"
    ],
    "Computer & IT Courses": [
        "Artificial Intelligence", "Machine Learning", "Data Analytics",
        "Cloud Computing", "Cybersecurity", "Blockchain Technology",
        "Web Development", "App Development", "Game Development",
        "Software Engineering", "UI/UX Design", "DevOps", "Networking",
        "Database Management", "Robotics Programming", "IoT"
    ]
};


const courseSelect = $("#course");
const deptSelect = $("#department");
$.each(courseData,(c)=>{ 
    courseSelect.append(`<option value="${c}">${c}</option>`); 
});
courseSelect.on("change", function () {
    let selected = $(this).val();

    $("#deptWrapper").css("display", selected ? "block" : "none");
    deptSelect.html(`<option value="" hidden selected>Select Department *</option>`);

    if (selected) {
        $.each(courseData[selected], (i, dep)=>{
            deptSelect.append(`<option value="${dep}">${dep}</option>`);
        });
    }
});

// Regex rules
const rN=/^[A-Za-z_]{3,50}$/,
      rI=/^[A-Za-z]{1,3}$/,
      rM=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,
      rP=/^\+91\d{10}$/,
      rPW=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;

// DOB max limit
const t=new Date(),m=new Date(t.getFullYear()-1,11,31);
$('#dob').attr('max', m.toISOString().split('T')[0]);
$('#password').on('input',()=>{
    v($('#confirmPassword'));
});
function v(f){
    let val=f.val().trim(), id=f.attr('id'),
    err=f.parent().find('.error'),
    ok=true,msg='';

    if(!val){ ok=false; msg=''; }
    else if(id=='initial' && !rI.test(val)){ ok=false; msg='Enter 1-3 letters'; }
    else if(id=='name' && !rN.test(val)){ ok=false; msg='3-50 letters only'; }
    else if(id=='email' && !rM.test(val)){ ok=false; msg='Invalid email'; }else if (id == 'phone') {
    if (!val || val === '+91') { 
        ok = false;
    } 
    else if (!rP.test(val)) { 
        ok = false;
        msg = '10 digits';
    }
}
    else if(id=='dob' && !val){ ok=false; msg='Select DOB'; }
    else if(id=='course' && !val){ ok=false; msg='Select course'; }
    else if(id=='department' && !val){ ok=false; msg='Select department'; }
    else if((id=='marks10'||id=='marks12')&&(val<0||val>100)){ ok=false; msg='0-100 only'; }
    else if(id=='password' && !rPW.test(val)){ ok=false; msg='Weak password'; }
    else if(id=='confirmPassword' && val!=$('#password').val()){ ok=false; msg='Not matching'; }

    err.text(msg);
    f.removeClass('input-valid input-invalid')
     .addClass(ok?'input-valid':'input-invalid');

    return ok;
}

// Initial input
$('#initial').on('input',()=>{
    let v1=$('#initial').val().replace(/[^A-Za-z]/g,'').slice(0,3);
    $('#initial').val(v1);
    v($('#initial'));
});

// Name input
$('#name').on('input',()=>{
    let v2=$('#name').val().replace(/[^A-Za-z_]/g,'').slice(0,50);
    $('#name').val(v2);
    v($('#name'));
});
$('#email').on('input',()=>{
    let v=$('#email').val().replace(/[^A-Za-z0-9@._]/g,'');
    $('#email').val(v);
    validateEmailParts(v);
});
function validateEmailParts(v){
    let err = $('#email').parent().find('.error');
    let ok=true,msg='';

    if(!v){ ok=false; msg='Required'; }
    else if(!/^[A-Za-z0-9_]+/.test(v)){ ok=false; msg='Start with letter/number/_'; }
    else if((v.match(/@/g)||[]).length>1){ ok=false; msg='Only one @ allowed'; }
    else if(v.includes('@')){
        let [local, domain] = v.split('@');

        if(!local){ ok=false; msg='Local part missing'; }
        else if(domain && !/^[A-Za-z0-9.]+$/.test(domain)){ ok=false; msg='Invalid domain'; }
        else if(domain && domain.startsWith('.')){ ok=false; msg='Domain cannot start with dot'; }
        else if(domain && (domain.match(/\./g)||[]).length > 1){ ok=false; msg='Only one dot allowed'; }
        else if(domain && domain.includes('.')){
            let [d,tld] = domain.split('.');
            if(!d){ ok=false; msg='Domain missing'; }
            else if(!tld){ ok=false; msg='TLD missing'; }
            else if(tld.length<2){ ok=false; msg='TLD must be 2+ letters'; }
        }
    }
    else msg='Type @ to continue';

    err.text(msg);
    $('#email').removeClass('input-valid input-invalid')
               .addClass(ok?'input-valid':'input-invalid');
    return ok;
}
$('#phone').on('input',()=>{
    let x=$('#phone').val();
    if(!x.startsWith('+91')) $('#phone').val('+91');
    let d=x.slice(3).replace(/\D/g,'').slice(0,10);
    $('#phone').val('+91'+d);
    v($('#phone'));
});
$('#dob').on('change',()=>v($('#dob')));
$('#course').on('change', function () {
    v($('#course'));
    let selected = $(this).val();
    $("#deptWrapper").css("display", selected ? "block" : "none");
    $('#department').html(`<option value="" hidden selected>Select Department *</option>`);
    if (selected) {
        $.each(courseData[selected], (i, dep)=>{
            $('#department').append(`<option value="${dep}">${dep}</option>`);
        });
    }
    v($('#department'));
});
$('#department').on('change', ()=> v($('#department')));
$('#marks10,#marks12').on('input', function(){
    $(this).val($(this).val().replace(/\D/g,'').slice(0,3));
    v($(this));
});
$('#password').on('input',()=>v($('#password')));
$('#confirmPassword').on('input',()=>v($('#confirmPassword')));
$('#togglePass').click(() => {
    let passField = $('#password');
    let currentType = passField.attr('type');
    let newType = currentType === 'password' ? 'text' : 'password';
    passField.attr('type', newType);
    if (newType === 'password') {
        passField.on('copy paste cut', (e) => {
            e.preventDefault();
        });
    } else {
        passField.off('copy paste cut'); 
    }
});

$('#toggleConfirmPass').click(() => {
    let confirmField = $('#confirmPassword');
    let currentType = confirmField.attr('type');
    let newType = currentType === 'password' ? 'text' : 'password';    
    confirmField.attr('type', newType);
    if (newType === 'password') {
        confirmField.on('copy paste cut', (e) => {
            e.preventDefault();
        });
    } else {
        confirmField.off('copy paste cut'); 
    }
});


$('#initial,#name,#dob,#email,#phone,#course,#department,#marks10,#marks12,#password,#confirmPassword')
    .on('focus blur', function () {
        v($(this));
    });

$('#registrationForm').submit(e=>{
    e.preventDefault();
    let ok=true;

    $('#initial,#name,#dob,#email,#phone,#course,#department,#marks10,#marks12,#password,#confirmPassword')
    .each(function(){
        if(!v($(this))) ok=false;
    });

    if(ok){
        $('#otpSection').slideDown(200).removeClass('hidden');
        $('#submitBtn').prop('disabled',true).text('Verifying...');
    }
});

$('#otpInput').on('input',function(){
    $(this).val($(this).val().replace(/\D/g,'').slice(0,6));
    let o=$(this).val().trim();

    if(/^\d{6}$/.test(o)){
        $('#verifyOtp').prop('disabled',false);

    } else {
        $('#verifyOtp').prop('disabled',true);
    }
});
$('#verifyOtp').click(()=>{
    let o=$('#otpInput').val().trim();
    if(!/^\d{6}$/.test(o)){
        $('#otpError').text('Invalid');
        return;
    }
    var UniqueID= $('#phone').val().trim();
    var AllData= {
        initial: $('#initial').val().trim(),
        name: $('#name').val().trim(),
        dob: $('#dob').val().trim(),
        email: $('#email').val().trim(),
        phone: $('#phone').val().trim(),
        course: $('#course').val().trim(),
        department: $('#department').val().trim(),
        marks12: $('#marks12').val().trim(),
        marks10: $('#marks10').val().trim(),
    };   
    localStorage.setItem(UniqueID, JSON.stringify(AllData));
UploadData()
    $('#otpError').text('');
    $('#successMessage').text('âœ“ Success').hide().fadeIn(300);

    setTimeout(()=>{
        $('#registrationForm')[0].reset();
        $('input,select').removeClass('input-valid input-invalid');
        $('#phone').val('+91');
        $('#otpSection').slideUp(200).addClass('hidden');
        $('#submitBtn').prop('disabled',false).text('Register Now');
        $('#successMessage').fadeOut(800);
    },1500);
});
});
</script>
</body>
</html>