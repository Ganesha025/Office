document.addEventListener("DOMContentLoaded",()=>{let e=(e,l)=>e.style.border="1px solid ash",l=(l,a,r)=>{e(l,a),l.nextElementSibling&&(l.nextElementSibling.textContent=a?"":r)},a=(e,l)=>{e&&(e.addEventListener("keydown",l),e.addEventListener("keyup",l),e.addEventListener("blur",l),e.addEventListener("focus",l))},r=document.querySelectorAll(".val-dobs");r.forEach(e=>{let r=new Date,n=new Date(r.setFullYear(r.getFullYear()-17)),u=n.toISOString().split("T")[0];e.setAttribute("max",u),a(e,e=>{e.target.value&&new Date(e.target.value)>n?l(e.target,!1,"Age must be 17 or older"):l(e.target,!0,"")})}),document.querySelectorAll(".val-product-names").forEach(e=>{let l=e=>{let l=e.target,a=l.value.replace(/[^A-Za-z0-9@#*&()]/g,""),r=a.match(/\d/g)||[];if(r.length>3){let n=0;a=a.split("").filter(e=>!/\d/.test(e)||++n<=3).join("")}l.value=a=a.slice(0,50);let u=/^[A-Za-z@#*&()]*\d{0,3}[A-Za-z@#*&()]*$/.test(a)&&a.length<=50;l.nextElementSibling&&(l.nextElementSibling.textContent=u?"":"Max 50 chars, max 3 numbers, letters & @#*&() only")};["input","keydown","keyup","blur","focus","paste"].forEach(a=>e.addEventListener(a,l))}),document.querySelectorAll(".val-description").forEach(e=>{let l=e=>{let l=e.target;l.value=l.value.slice(0,250);let a=l.value.length<=250;l===document.activeElement?l.style.border=a?"1px solid green":"1px solid #ccc":l.style.border=a?"1px solid #ccc":"1px solid red",l.nextElementSibling&&(l.nextElementSibling.textContent=a?"":"Max 250 characters")};["input","keydown","keyup","blur","focus","paste"].forEach(a=>e.addEventListener(a,l))}),document.querySelectorAll(".newdataofjourney").forEach(e=>{let l=new Date,a=new Date(l);a.setDate(l.getDate()-30),e.setAttribute("min",a.toISOString().split("T")[0]),e.setAttribute("max",l.toISOString().split("T")[0]),e.addEventListener("input",l=>l.target.setCustomValidity(l.target.value<e.min||l.target.value>e.max?"Invalid date":""))}),document.querySelectorAll(".val-emp-id").forEach(e=>{a(e,e=>{let a=e.target;if("keydown"===e.type&&1===e.key.length){/[A-Za-z0-9]/.test(e.key)||e.preventDefault();let r=a.value.replace(/^EMP/i,"");r.length>=4&&e.preventDefault()}a.value=a.value.toUpperCase();let n=/^EMP[A-Z0-9]{1,4}$/.test(a.value);l(a,n,"Format: EMP1 to EMP1234")})}),document.querySelectorAll(".val-emp-ids").forEach(e=>{let r=!1;a(e,e=>{let a=e.target;if("focus"===e.type&&(r=!0,a.style.border="1px solid #ccc",a.nextElementSibling&&(a.nextElementSibling.textContent="")),"blur"===e.type&&(r=!1),"keydown"===e.type&&1===e.key.length){/[A-Za-z0-9]/.test(e.key)||e.preventDefault();let n=a.value.replace(/^EMP/i,"");n.length>=4&&e.preventDefault()}a.value=a.value.toUpperCase();let u=/^EMP[A-Z0-9]{1,4}$/.test(a.value);r?(a.style.border=u?"1px solid green":"1px solid #ccc",a.nextElementSibling&&(a.nextElementSibling.textContent="")):l(a,u,"Format: EMP1 to EMP1234")})}),document.querySelectorAll(".val-age").forEach(e=>{a(e,e=>{let a=e.target,r=()=>{let e=parseInt(a.value,10),r=e>=0&&e<=200&&a.value.length<=3;l(a,r,"Age must be a valid number between 0 and 200 (max 3 digits)")};"keydown"===e.type&&(/[0-9]/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=3&&1===e.key.length&&e.preventDefault()),"paste"===e.type&&setTimeout(r,0),r()})}),document.querySelectorAll(".val-gender").forEach(e=>{a(e,e=>{let a=e.target,r=()=>{let e=""!==a.value;l(a,e,"Please select a gender")};r()})}),document.querySelectorAll(".val-location").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/[A-Za-z]/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=25&&1===e.key.length&&e.preventDefault()),l(e.target,e.target.value.length>0&&e.target.value.length<=25&&/^[A-Za-z]+$/.test(e.target.value),"Letters only, max 25 characters")})}),document.querySelectorAll(".val-otp").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/^[0-9]$/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=4&&1===e.key.length&&e.preventDefault()),l(e.target,4===e.target.value.length,"4 digits")})}),document.querySelectorAll(".val-new-name").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&(/[A-Za-z ]/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=25&&1===e.key.length&&e.preventDefault()),l(a,/^[A-Za-z ]{1,25}$/.test(a.value.trim()),"Letters & spaces only, max 25 characters")})}),document.querySelectorAll(".val-com-name").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&(/[A-Za-z0-9]/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=25&&1===e.key.length&&e.preventDefault());let r=/^[A-Za-z0-9]{2,25}$/.test(a.value);l(a,r,"Letters & numbers only, 2-25 chars, no spaces")})}),document.querySelectorAll(".val-coms-name").forEach(e=>{a(e,e=>{let a=e.target;if("keydown"===e.type&&1===e.key.length){/[A-Za-z0-9]/.test(e.key)||e.preventDefault(),a.value.length>=25&&e.preventDefault();let r=a.value.match(/\d+/g)||[],n=r[r.length-1]||"";/\d/.test(e.key)&&n.length>=7&&e.preventDefault()}let u=a.value.trim(),v=u.match(/\d+/g)||[],g=/^[A-Za-z0-9]{1,25}$/.test(u)&&v.every(e=>e.length<=7);l(a,g,"Letters & numbers only, max 25 chars, numbers up to 7 digits")})}),document.querySelectorAll(".val-experience").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/[0-9]/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=2&&1===e.key.length&&e.preventDefault()),+e.target.value>=70&&(e.target.value="69"),l(e.target,""!==e.target.value&&70>+e.target.value,"Valid experience (0-69)")})}),document.querySelectorAll(".val-salary").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/[0-9]/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=7&&1===e.key.length&&e.preventDefault()),+e.target.value>=9e6&&(e.target.value="8999999"),l(e.target,""!==e.target.value&&9e6>+e.target.value,"Valid Price (< 90 Lakhs)")})}),document.querySelectorAll(".val-url").forEach(e=>{a(e,e=>{let a=e.target;"keydown"!==e.type||1!==e.key.length||/[A-Za-z0-9:/.]/.test(e.key)||e.preventDefault();let r=/^https:\/\/[A-Za-z0-9\-._/]+$/.test(a.value);l(a,r,"Must start with http://")})}),document.querySelectorAll(".val-product-name").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&1===e.key.length&&(/=|@|!|\$|%|\^/.test(e.key)&&e.preventDefault(),a.value.length>=50&&e.preventDefault()),a.value=a.value.replace(/[=@!$%^]/g,"").slice(0,50),l(a,a.value.length>0&&a.value.length<=50,"Max 50 chars, invalid symbols: = @ ! $ % ^")})}),document.querySelectorAll(".val-github").forEach(e=>{a(e,e=>{let a=e.target,r=()=>{let e=/^https:\/\/github\.com\/[A-Za-z0-9-_.]{1,39}$/,r=e.test(a.value);l(a,r,"Invalid GitHub URL (https://github.com/username)")};"keydown"!==e.type||/[A-Za-z0-9/-_.]/.test(e.key)||1!==e.key.length||e.preventDefault(),"paste"===e.type&&setTimeout(r,0),r()})});let n=document.querySelectorAll(".val-ended-date");n.forEach(e=>{let r=new Date().toISOString().split("T")[0];e.setAttribute("min",r),a(e,e=>{e.target.value&&e.target.value<r?l(e.target,!1,"Select a future date"):l(e.target,!0,"")})}),document.querySelectorAll(".val-len-of-str").forEach(e=>{let l=e=>{let l=e.target;"keydown"===e.type&&1===e.key.length&&(/[A-Za-z0-9]/.test(e.key)||e.preventDefault(),l.value.length>=200&&e.preventDefault()),l.value=l.value.replace(/[^A-Za-z0-9]/g,"");let a=l.value.length<=200;l.style.border=a?"1px solid green":"1px solid red",l.nextElementSibling&&(l.nextElementSibling.textContent=a?"":"Only letters & numbers, max 200 characters")};["keydown","keyup","input","paste","blur","focus"].forEach(a=>e.addEventListener(a,l))}),document.querySelectorAll(".val-mobile").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&(/^[0-9]$/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=10&&1===e.key.length&&e.preventDefault());let r=/^[6-9][0-9]{9}$/.test(a.value);l(a,r,"Mobile number must start with 6-9 and be 10 digits")})}),document.querySelectorAll(".val-pincode").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/^[0-9]$/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=6&&1===e.key.length&&e.preventDefault()),l(e.target,6===e.target.value.length,"6 digits")})}),document.querySelectorAll(".val-registration-date").forEach(e=>{let r=new Date().toISOString().split("T")[0];e.setAttribute("type","date"),e.setAttribute("max",r),a(e,e=>l(e.target,e.target.value===n||e.target.value===r,"Select the ended date or today's date"))}),document.querySelectorAll(".val-alt-email").forEach(e=>{a(e,e=>{let a=e.target;if("keydown"===e.type&&1===e.key.length){let r=a.selectionStart,n=a.value.slice(0,r);!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(e.key)&&(n.includes("@")&&/[0-9]/.test(e.key)||!/[A-Za-z0-9@._]/.test(e.key))&&e.preventDefault()}let u=/^[A-Za-z0-9._]+@[A-Za-z]+\.[A-Za-z]{2,}$/.test(a.value);""===a.value?a.style.border=a.nextElementSibling&&(a.nextElementSibling.textContent=""):l(a,u,"Invalid email")})}),document.querySelectorAll(".val-username").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&(/^[A-Za-z]$/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=25&&1===e.key.length&&e.preventDefault()),l(a,/^[A-Za-z]{1,25}$/.test(a.value),"Letters only, max 25 characters")})}),document.querySelectorAll(".val-alt-mobile").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&(!/^[0-9]$/.test(e.key)&&"Backspace"!==e.key||a.value.length>=10&&1===e.key.length)&&e.preventDefault();let r=/^[6-9][0-9]{9}$/.test(a.value);""===a.value?a.style.border=a.nextElementSibling&&(a.nextElementSibling.textContent=""):l(a,r,"Mobile number must start with 6-9 and be 10 digits")})}),document.querySelectorAll(".val-address").forEach(e=>{a(e,e=>{let a=e.target;a.value=a.value.replace(/[0-9]/g,""),a.value.length>250&&(a.value=a.value.substring(0,250)),"keydown"===e.type&&(a.value.length>=250||/\d/.test(e.key))&&1===e.key.length&&e.preventDefault();let r=a.value.trim().length>=20&&a.value.trim().length<=250;l(a,r,"Address must be between 20 and 250 characters and contain no numbers")})}),document.querySelectorAll(".val-mark").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/^[0-9]$/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=1&&1===e.key.length&&e.preventDefault()),+e.target.value>8&&(e.target.value="8"),l(e.target,""!==e.target.value,"Required")})}),document.querySelectorAll(".val-stock").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&(/^[0-9]$/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=4&&1===e.key.length&&e.preventDefault()),+a.value>9999&&(a.value="9999"),l(a,""!==a.value&&9999>=+a.value,"Required")})}),document.querySelectorAll(".val-discount").forEach(e=>{a(e,e=>{let a=e.target;"keydown"===e.type&&(/^[0-9]$/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=2&&1===e.key.length&&e.preventDefault()),+a.value>99&&(a.value="99"),l(a,""!==a.value&&99>=+a.value,"Required")})}),document.querySelectorAll(".val-aadhar").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/^[0-9]$/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=12&&1===e.key.length&&e.preventDefault()),l(e.target,12===e.target.value.length,"12 digits")})});let u=document.querySelector(".val-dob");if(u){let v=new Date().toISOString().split("T")[0];u.max=new Date(Date.now()-864e5).toISOString().split("T")[0],a(u,e=>l(e.target,e.target.value&&e.target.value<v,"Invalid"))}document.querySelectorAll(".val-initial").forEach(e=>{a(e,e=>{"keydown"===e.type&&(/^[A-Za-z]$/.test(e.key)||1!==e.key.length||e.preventDefault(),e.target.value.length>=2&&1===e.key.length&&e.preventDefault()),l(e.target,2===e.target.value.length,"2 letters")})}),document.querySelectorAll(".val-year").forEach(e=>{e.addEventListener("input",e=>{let a=e.target.value.replace(/\D/g,"");+a>2100&&(a="2100"),e.target.value=a,l(e.target,2100>=+a,"max 2100")}),e.addEventListener("keydown",e=>{1!==e.key.length||/[0-9]/.test(e.key)||e.preventDefault()})}),document.querySelectorAll(".val-char-limit").forEach(e=>{e.addEventListener("keydown",l=>{e.value.length>=30&&1===l.key.length&&l.preventDefault()}),e.addEventListener("input",a=>{e.value.length>30&&(e.value=e.value.slice(0,30)),l(e,e.value.length<=30,"Max 30 characters")})}),document.querySelectorAll(".val-email").forEach(e=>{a(e,e=>{let a=e.target,r=a.value.indexOf("@");"keydown"===e.type&&(-1!==r?(/[0-9]/.test(e.key)&&e.preventDefault(),(" "===e.key||"@"===e.key||/[^A-Za-z._]/.test(e.key))&&e.preventDefault()):/[A-Za-z0-9@._]/.test(e.key)||e.preventDefault()),l(a,/^[A-Za-z0-9._]+@[A-Za-z0-9]+\.[A-Za-z]{2,}$/.test(a.value),"Invalid email")})}),document.querySelectorAll(".val-flightTicket").forEach(e=>{e.addEventListener("keydown",e=>{let l=e.target;1!==e.key.length||(l.selectionStart<3?/T|K|-/.test(e.key.toUpperCase())||e.preventDefault():(!/[0-9]/.test(e.key)||l.value.length>=11)&&e.preventDefault())}),e.addEventListener("input",e=>{let l=e.target;l.value=l.value.toUpperCase().replace(/[^TK0-9-]/g,""),/^TK-\d{0,8}$/.test(l.value)||(l.value=l.value.slice(0,3)+l.value.slice(3).replace(/\D/g,"").slice(0,8))})}),document.querySelectorAll(".val-vehicle").forEach(e=>{a(e,e=>{let a=e.target;/[A-Za-z0-9]/.test(e.key)||1!==e.key.length||e.preventDefault(),a.value.length>=10&&1===e.key.length&&e.preventDefault(),a.value=a.value.toUpperCase(),l(a,/^[A-Za-z0-9]{1,10}$/.test(a.value),"Max 10 characters, no special characters")})}),document.querySelectorAll(".val-km").forEach(e=>{e.addEventListener("keydown",l=>{/[0-9]/.test(l.key)||1!==l.key.length||l.preventDefault(),e.value.length>=4&&1===l.key.length&&l.preventDefault()}),e.addEventListener("input",l=>{+e.value>2e3&&(e.value="2000")})}),document.querySelectorAll(".val-category").forEach(e=>{let l=e=>{let l=e.target;l.value=l.value.replace(/[^A-Za-z0-9]/g,"").slice(0,30);let a=/^[A-Za-z0-9]{1,30}$/.test(l.value);l===document.activeElement?l.style.border=a?"1px solid green":"1px solid #ccc":l.style.border=a?"1px solid #ccc":"1px solid red",l.nextElementSibling&&(l.nextElementSibling.textContent=a?"":"Letters & numbers only, max 30 chars")};["input","keydown","keyup","blur","focus","paste"].forEach(a=>e.addEventListener(a,l))}),document.querySelectorAll(".val-amt").forEach(e=>{e.addEventListener("keydown",l=>{/[0-9]/.test(l.key)||1!==l.key.length||l.preventDefault(),e.value.length>=5&&1===l.key.length&&l.preventDefault()}),e.addEventListener("input",l=>{+e.value>5e4&&(e.value="50000")})}),document.querySelectorAll(".val-password").forEach(e=>{let l=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9]).{6,16}$/,a=l.test(t.value);t.nextElementSibling&&(t.nextElementSibling.textContent=a?"":"Password must be 6-16 chars, 1 upper, 1 lower, 1 special")}),document.querySelectorAll(".val-file").forEach(e=>{e.addEventListener("change",l=>{let a=l.target.files[0];if(!a){e.style.border="1px solid red",e.nextElementSibling&&(e.nextElementSibling.textContent="File required");return}let r="application/pdf"===a.type,n=a.size<=5242880;r&&n?(e.style.border="1px solid green",e.nextElementSibling&&(e.nextElementSibling.textContent="")):(e.style.border="1px solid red",e.nextElementSibling&&(e.nextElementSibling.textContent=r?"File must be â‰¤ 5MB":"Only PDF files allowed"),e.value="")})})}),document.querySelectorAll("input").forEach(e=>{e.addEventListener("copy",e=>{e.preventDefault()}),e.addEventListener("cut",e=>{e.preventDefault()})});
