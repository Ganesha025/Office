<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Admission Application Form</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../common.css">
    <style>
        .invalid { border-color: red; }
        .valid { border-color: green; }
        .error-message { color: red; font-size: 0.875rem; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-8 bg-white shadow-md rounded-md w-full max-w-3xl">
        <form id="admissionForm" method="POST">
            <div class="mb-4">
                <label for="studentName" class="block text-sm font-semibold">Student Name</label>
                <input type="text" id="studentName" class="w-full p-2 border rounded-md focus:outline-none" required>
                <span id="nameError" class="error-message hidden">This field is required.</span>
            </div>

            <div class="mb-4">
                <label for="dob" class="block text-sm font-semibold">Date of Birth</label>
                <input type="date" id="dob" class="w-full p-2 border rounded-md focus:outline-none" required>
                <span id="dobError" class="error-message hidden">Age must be >= 17.</span>
            </div>

            <div class="mb-4">
                <label for="gender" class="block text-sm font-semibold">Gender</label>
                <select id="gender" class="w-full p-2 border rounded-md focus:outline-none" required>
                    <option value="">Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
                <span id="genderError" class="error-message hidden">This field is required.</span>
            </div>

            <div class="mb-4">
                <label for="fatherName" class="block text-sm font-semibold">Father's Name</label>
                <input type="text" id="fatherName" class="w-full p-2 border rounded-md focus:outline-none" required>
                <span id="fatherNameError" class="error-message hidden">This field is required.</span>
            </div>

            <div class="mb-4">
                <label for="motherName" class="block text-sm font-semibold">Mother's Name</label>
                <input type="text" id="motherName" class="w-full p-2 border rounded-md focus:outline-none" required>
                <span id="motherNameError" class="error-message hidden">This field is required.</span>
            </div>

            <div class="mb-4">
                <label for="address" class="block text-sm font-semibold">Address</label>
                <textarea id="address" class="w-full p-2 border rounded-md focus:outline-none" rows="3" required></textarea>
                <span id="addressError" class="error-message hidden">This field is required.</span>
            </div>

            <div class="mb-4">
                <label for="tenthMarks" class="block text-sm font-semibold">10th Marks (%)</label>
                <input type="number" id="tenthMarks" class="w-full p-2 border rounded-md focus:outline-none" step="0.01" required>
                <span id="tenthMarksError" class="error-message hidden">Please enter valid marks.</span>
            </div>

            <div class="mb-4">
                <label for="twelfthMarks" class="block text-sm font-semibold">12th Marks (%)</label>
                <input type="number" id="twelfthMarks" class="w-full p-2 border rounded-md focus:outline-none" step="0.01" required>
                <span id="twelfthMarksError" class="error-message hidden">Please enter valid marks.</span>
            </div>

            <div class="mb-4">
                <label for="course" class="block text-sm font-semibold">Course Applying For</label>
                <select id="course" class="w-full p-2 border rounded-md focus:outline-none" required>
                    <option value="">Select Course</option>
                    <option value="BSc">BSc</option>
                    <option value="BA">BA</option>
                    <option value="BCom">BCom</option>
                    <option value="BTech">BTech</option>
                </select>
                <span id="courseError" class="error-message hidden">This field is required.</span>
            </div>

            <div class="mb-4">
                <label for="marksheet" class="block text-sm font-semibold">Upload Marksheet</label>
                <input type="file" id="marksheet" class="w-full p-2 border rounded-md focus:outline-none" required>
                <span id="marksheetError" class="error-message hidden">Please upload your marksheet.</span>
            </div>

            <div class="mb-4">
                <label for="email" class="block text-sm font-semibold">Email</label>
                <input type="email" id="email" class="w-full p-2 border rounded-md focus:outline-none" required>
                <span id="emailError" class="error-message hidden">Please enter a valid email.</span>
            </div>

            <div class="mb-4">
                <label for="mobile" class="block text-sm font-semibold">Mobile</label>
                <input type="text" id="mobile" class="w-full p-2 border rounded-md focus:outline-none" required>
                <span id="mobileError" class="error-message hidden">Please enter a valid mobile number.</span>
            </div>

            <div class="mb-4">
                <label for="bloodGroup" class="block text-sm font-semibold">Blood Group</label>
                <select id="bloodGroup" class="w-full p-2 border rounded-md focus:outline-none" required>
                    <option value="">Select Blood Group</option>
                    <option value="A+">A+</option>
                    <option value="B+">B+</option>
                    <option value="O+">O+</option>
                    <option value="AB+">AB+</option>
                    <option value="A-">A-</option>
                    <option value="B-">B-</option>
                    <option value="O-">O-</option>
                    <option value="AB-">AB-</option>
                </select>
                <span id="bloodGroupError" class="error-message hidden">This field is required.</span>
            </div>

            <div class="mb-4">
                <label for="hostel" class="block text-sm font-semibold">Hostel Required?</label>
                <select id="hostel" class="w-full p-2 border rounded-md focus:outline-none">
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
            </div>

            <div id="guardianDetails" class="hidden mb-4">
                <div class="mb-4">
                    <label for="guardianName" class="block text-sm font-semibold">Guardian Name</label>
                    <input type="text" id="guardianName" class="w-full p-2 border rounded-md focus:outline-none">
                </div>

                <div class="mb-4">
                    <label for="guardianContact" class="block text-sm font-semibold">Guardian Contact</label>
                    <input type="text" id="guardianContact" class="w-full p-2 border rounded-md focus:outline-none">
                </div>
            </div>

            <div class="mb-4">
                <button type="submit" id="submitButton" class="w-full py-2 px-4 bg-blue-600 text-white rounded-md">Submit</button>
                <div id="confirmationMessage" class="mt-4 text-center text-green-600 hidden">Form submitted successfully!</div>
            </div>
        </form>
    </div>

    <script>
        $(function () {
            $('#studentName').focus();
            const validateField = (input) => {
                if ($(input).val()) {
                    $(input).removeClass('invalid').addClass('valid');
                    $(input).next('.error-message').addClass('hidden');
                } else {
                    $(input).removeClass('valid').addClass('invalid');
                    $(input).next('.error-message').removeClass('hidden');
                }
            };

            const validateMarks = (input) => {
                const valid = /^\d+(\.\d{1,2})?$/.test($(input).val());
                if (valid) {
                    $(input).removeClass('invalid').addClass('valid');
                } else {
                    $(input).removeClass('valid').addClass('invalid');
                }
            };

            $("input, select, textarea").on('input focus blur', function () {
                validateField(this);
            });

            $("#tenthMarks, #twelfthMarks").on('keyup', function () {
                validateMarks(this);
            });

            $("#dob").on('change', function () {
                const dob = new Date($(this).val());
                const age = new Date().getFullYear() - dob.getFullYear();
                if (age < 17) {
                    $("#dobError").removeClass('hidden');
                } else {
                    $("#dobError").addClass('hidden');
                }
            });

            $("#hostel").on('change', function () {
                if ($(this).val() === "Yes") {
                    $("#guardianDetails").slideDown();
                } else {
                    $("#guardianDetails").slideUp();
                }
            });

            $("#admissionForm").on('submit', function (e) {
                e.preventDefault();
                let valid = true;
                $("input, select, textarea").each(function () {
                    if (!$(this).val() || $(this).hasClass('invalid')) {
                        valid = false;
                    }
                });
                if (valid) {
                    $("#confirmationMessage").fadeIn().delay(3000).fadeOut();
                    $(this)[0].reset();
                } else {
                    alert('Please fill in all required fields correctly.');
                }
            });
        });
    </script>
</body>
</html>