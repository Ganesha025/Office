<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{background:#f5f7fa;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;display:flex;flex-direction:column;justify-content:center;padding:50px 20px 30px;min-height:100vh}form{width:900px;max-width:100%;background:#fff;padding:40px;border-radius:20px;box-shadow:0 4px 6px rgba(0,0,0,.07),0 10px 20px rgba(0,0,0,.05);margin:0 auto}section{border:none;background:#fafbfc;padding:30px;margin:25px 0;border-radius:12px;border-left:4px solid #006aff}h2{margin-bottom:20px;font-size:20px;font-weight:600;color:#1a1a1a;letter-spacing:-.3px;text-decoration:none}form h1{margin-bottom:30px;border-bottom:none;padding-bottom:15px;border-radius:0;font-size:32px;font-weight:700;color:#1a1a1a;letter-spacing:-1px}.row{display:flex;gap:20px;flex-wrap:wrap}.row .g{flex:1;min-width:250px}.g{display:flex;flex-direction:column;margin-bottom:20px}label{font-size:14px;font-weight:500;color:#2c3e50;margin-bottom:8px;letter-spacing:.2px}input,.picker,textarea{padding:12px 16px;border:2px solid #e1e8ed;border-radius:8px;font-size:14px;transition:all .2s;background:#fff;color:#1a1a1a}input:focus,.picker:focus,textarea:focus{outline:none;border-color:#006aff;box-shadow:0 0 0 3px rgba(0,106,255,.1)}input::placeholder,textarea::placeholder{color:#a0aec0}.picker{cursor:pointer;display:flex;align-items:center;min-height:44px;position:relative}.picker:after{content:'â–¼';position:absolute;right:16px;font-size:10px;color:#64748b;transition:.2s}.picker:hover{border-color:#006aff;background:#f8fafc}.pWrap{position:relative}.pList{display:none;position:absolute;background:#fff;border:2px solid #e1e8ed;width:100%;z-index:999;border-radius:8px;margin-top:4px;box-shadow:0 10px 25px rgba(0,0,0,.1);max-height:240px;overflow-y:auto}.pList div{padding:12px 16px;cursor:pointer;font-size:14px;color:#2c3e50;transition:.15s}.pList div:hover{background:#f0f7ff;color:#006aff}.err{color:#ef4444;font-size:13px;margin-top:6px;font-weight:500}button{width:100%;padding:14px;font-size:16px;font-weight:600;border:none;border-radius:10px;background:#006aff;color:#fff;cursor:pointer;transition:all .2s;margin-top:10px;letter-spacing:.3px}button:hover:not(:disabled){background:#0052cc;transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,106,255,.3)}button:disabled{background:#cbd5e1;cursor:not-allowed;transform:none}textarea{min-height:100px;resize:vertical;font-family:inherit}header{background:#1a1a1a;color:#fff;width:100%;padding:20px 40px;border-radius:0;margin-bottom:0;position:sticky;top:0;z-index:1000;box-shadow:0 2px 8px rgba(0,0,0,.1)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#94a3b8}
</style>
</head>

<body>
    <!-- <header>
        <h1>CRM</h1>
    </header> -->
<form id="f">
<h1>CRM</h1>

<section>
<h2>Lead Info</h2>

<div class="row">
<div class="g">
<label>Lead Name *</label>
<input id="leadName" class="val-new-name" placeholder="Enter Name"><div class="err"></div>
</div>

<div class="g">
<label>Company Name *</label>
<input id="company" class="val-coms-name" placeholder="Enter Company Name"><div class="err"></div>
</div>
</div>

<div class="row">
<div class="g">
<label>Email *</label>
<input id="email" class="val-email" placeholder="Enter Email ID"><div class="err"></div>
</div>

<div class="g">
<label>Alternative Email</label>
<input id="altEmail" class="val-alt-email" placeholder="Enter Alternative Email ID"><div class="err"></div>
</div>
</div>

<div class="row">
<div class="g">
<label>Phone *</label>
<input id="phone" class="val-mobile" placeholder="Enter Mobile Number"><div class="err"></div>
</div>

<div class="g">
<label>Alternative Phone</label>
<input id="altPhone" class="val-alt-mobile" placeholder="Enter Alternative Mobile"><div class="err"></div>
</div>
</div>

<div class="g pWrap">
<label>Lead Source *</label>
<div class="picker" id="leadSource"></div>
 <div class="pList" id="leadSourceList"></div>

<div class="err"></div>
</div>

</section>


<section>
<h2>Address</h2>

<div class="row">
<div class="g pWrap">
<label>Country *</label>
<div class="picker" id="country"></div>
<div class="pList" id="countryList"></div>
<div class="err"></div>
</div>

<div class="g pWrap">
<label>State *</label>
<div class="picker" id="state"></div>
<div class="pList" id="stateList"></div>
<div class="err"></div>
</div>
</div>

<div class="row">
<div class="g">
<label>City *</label>
<input id="city" class="val-location" placeholder="Enter City Name"><div class="err"></div>
</div>
<div class="g">
<label>Pincode *</label>
<input id="pin" class="val-pincode" placeholder="Enter Pincode"><div class="err"></div>
</div>
</div>

<div class="g">
<label>Full Address *</label>
<textarea id="addr" class="val-address" placeholder="Enter Your Full Address"></textarea><div class="err"></div>
</div>

</section>


<section>
<h2>Qualification</h2>

<div class="row">
<div class="g pWrap">
<label>Stage *</label>
<div class="picker" id="stage"></div>
<div class="pList" id="stageList"></div>
<div class="err"></div>
</div>

<div class="g">
<label>Lead Score *</label>
<input id="score" class="val-mark" placeholder="Enter Lead Score"><div class="err"></div>
</div>
</div>

<div class="row">
<div class="g pWrap">
<label>Industry *</label>
<div class="picker" id="industry"></div>
<div class="pList" id="industryList"></div>

<div class="err"></div>
</div>

<div class="g">
<label id="ExpectedLabel">Expected Revenue</label>
<input id="revenue" class="val-salary" placeholder="Expected Revenue"><div class="err"></div>
</div>
</div>

<div class="row">
<div class="g">
<label>Min Budget *</label>
<input id="b1" placeholder="Minimum Budget"><div class="err"></div>
</div>
<div class="g">
<label>Max Budget *</label>
<input id="b2" class="val-salary" placeholder="Maximum Budget"><div class="err"></div>
</div>
</div>

</section>

<button id="btn" disabled>Submit</button>
</form>

<script>
  $('#leadName').focus();  

let src=["Website","Facebook","Referral","Existing Customer","Walk-in","Partner","WhatsApp"]
let countries = ["India", "USA", "Dubai"];
loadPicker("state", []); 

let states = {
  "India": ["Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh","Goa", "Gujarat", "Haryana", "Himachal Pradesh", "Jharkhand","Karnataka", "Kerala", "Madhya Pradesh", "Maharashtra", "Manipur","Meghalaya", "Mizoram", "Nagaland", "Odisha", "Punjab","Rajasthan", "Sikkim", "Tamil Nadu", "Telangana", "Tripura","Uttar Pradesh", "Uttarakhand", "West Bengal"],
  "USA":["California", "Texas", "Florida", "New York", "Illinois","Pennsylvania", "Ohio", "Georgia", "North Carolina", "Michigan"],
  "Dubai": ["Dubai City", "Hatta", "Jebel Ali", "Al Awir"]
};
let stages=["New","Contacted","Interested","Qualified","Proposal Sent","Negotiation","Converted","Lost"]
let inds=["IT","Retail","Manufacturing","Logistics","Education","Finance"]

function loadPicker(id,list){
    let box=$("#"+id+"List")
    list.forEach(v=>box.append("<div>"+v+"</div>"))
    $("#"+id).on("click",()=>box.toggle())
box.on("click","div",function(){
    $("#"+id).text($(this).text()).removeClass("placeholder");
    box.hide();
    validate();
});
}

loadPicker("leadSource",src)
loadPicker("country",countries)
loadPicker("stage",stages)
loadPicker("industry",inds)

function e(id,msg){ $("#"+id).nextAll(".err").first().text(msg); }

$("#countryList").on("click", "div", function () {
    let selectedCountry = $(this).text();
    $("#country").text(selectedCountry).removeClass("placeholder");
    $("#countryList").hide();

    // Reset state picker
    $("#state").text("").addClass("placeholder");
    $("#stateList").empty();

    // Load states for selected country
    states[selectedCountry].forEach(s => {
        $("#stateList").append("<div>" + s + "</div>");
    });
});

function validate(){
    $(".err").text("")
    let ok=true

    if(!/^[A-Za-z ]{3,}$/.test(leadName.value)) ok=e("leadName","Invalid")
    if(!/^[A-Za-z0-9 ]{2,}$/.test(company.value)) ok=e("company","Invalid")

    let mail=/^[^\s@]+@[^\s@]+\.[^\s@]+$/
    if(!mail.test(email.value)) ok=e("email","Invalid")
    if(altEmail.value && !mail.test(altEmail.value)) ok=e("altEmail","Invalid")
    if(email.value===altEmail.value && altEmail.value) ok=e("altEmail","Different required")

    if(!/^\d{10}$/.test(phone.value)) ok=e("phone","10 digits")
    if(altPhone.value && !/^\d{10}$/.test(altPhone.value)) ok=e("altPhone","10 digits")
    if(phone.value===altPhone.value && altPhone.value) ok=e("altPhone","Different required")

    if(!leadSource.innerText) ok=e("leadSource","Required")
    if(!country.innerText) ok=e("country","Required")
    if(!state.innerText) ok=e("state","Required")

    if(!/^[A-Za-z]+$/.test(city.value)) ok=e("city","Invalid")
    if(!/^\d{6}$/.test(pin.value)) ok=e("pin","6 digits")
    if(addr.value.length<10) ok=e("addr","Min 10 chars")

    if(!stage.innerText) ok=e("stage","Required")
    if(!(score.value>=1 && score.value<=100)) ok=e("score","1-100")
    if(!industry.innerText) ok=e("industry","Required")

if (["Qualified", "Proposal Sent", "Negotiation"].includes(stage.textContent)) {
    if (!(Number(revenue.value) > 0)) {
        e("revenue", "Required");
        document.getElementById('ExpectedLabel').textContent = 'Expected Revenue *';
        ok = false;
    } else {
        document.getElementById('ExpectedLabel').textContent = 'Expected Revenue';
    }
} else {
    document.getElementById('ExpectedLabel').textContent = 'Expected Revenue';
}

    if(!(b1.value>0)) ok=e("b1","Required")
    if(!(b2.value>0)) ok=e("b2","Required")
    if(Number(b2.value)<=Number(b1.value)) ok=e("b2","Greater")

    $("#btn").prop("disabled",!ok)
    return ok
}

$("input,textarea").on("input",validate)

$("#f").on("submit", function(e) {
    e.preventDefault();

    if (validate()) {
         this.reset();
        $("#btn").prop("disabled", true); 
        $(".picker").text("").addClass("placeholder"); 
        $(".err").text(""); 
        $('input').css('border-color','#e1e8ed');
        $('textarea').css('border-color','#e1e8ed');

        setTimeout(() =>             spawnUniquePopup("Success","Form submitted!"), 10);
       
       
    }
});

</script>
<script src="valid.js"></script>
</body>
</html>
